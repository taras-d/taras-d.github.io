!function(t){function e(i){if(o[i])return o[i].exports;var s=o[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var o={};e.m=t,e.c=o,e.i=function(t){return t},e.d=function(t,o,i){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=8)}([function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,o){this.ctx=t,this.x=e,this.y=o,this.offset={left:0,right:0,top:0,bottom:0}}return t}();e.Component=i},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});!function(t){t[t.Space=32]="Space",t[t.Left=37]="Left",t[t.Right=39]="Right"}(e.Key||(e.Key={}));!function(t){t[t.Play=0]="Play",t[t.Win=1]="Win",t[t.Loss=2]="Loss"}(e.GameStatus||(e.GameStatus={}))},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(1),s=o(5),n=o(4),r=o(6),a=o(7),l=o(9),h=function(){function t(t,e){this.options=t,this.parent=e;var o=this.options;this.width=o.screen.width,this.height=o.screen.height,this.autoPlay=o.autoPlay,this.createCanvas(),this.createPaddle(),this.createBall(),this.createStatus()}return t.prototype.newGame=function(){this.gameStatus=i.GameStatus.Play,this.status.reset(),this.createBricks(),this.movePaddleToCenter(),this.captureBall(!this.autoPlay)},t.prototype.createCanvas=function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height,this.canvas=t,this.ctx=t.getContext("2d"),this.parent.appendChild(t),this.canvasRect=t.getBoundingClientRect()},t.prototype.createPaddle=function(){var t=this.options,e=Math.round(this.height-t.paddle.offsetBottom-t.paddle.height);this.paddle=new r.Paddle(this.ctx,0,e,t.paddle),this.movePaddleToCenter(),this.paddleStep=.02*this.width},t.prototype.createBall=function(){this.options;this.ball=new n.Ball(this.ctx,0,0,this.options.ball),this.moveBallToPaddleCenter(),this.ballXStep=9,this.ballYStep=-this.ballXStep},t.prototype.createBricks=function(){for(var t=[],e=this.options.brick,o=e.width,i=e.height,n=Math.round(.35*this.height/(i+20)),r=Math.round((this.width-200)/(o+20)),a=100,l=70,h=0;h<n;++h){for(var p=0;p<r;++p)t.push(new s.Brick(this.ctx,a,l,e)),a+=o+20;a=100,l+=i+20}this.bricks=t,this.bricksLen=t.length},t.prototype.createStatus=function(){this.status=new a.Status(this.ctx,0,0,this.options.status)},t.prototype.clear=function(){var t=this.options,e=this.ctx;e.fillStyle=t.bg.fill,e.clearRect(0,0,t.screen.width,t.screen.height)},t.prototype.draw=function(){this.clear(),this.processCollision(),this.drawPaddle(),this.drawBall(),this.drawBricks(),this.drawStatus(),this.gameStatus!==i.GameStatus.Play&&this.drawGameEnd()},t.prototype.drawPaddle=function(){var t=this.paddle,e=this.ball;this.autoPlay&&this.movePaddle(e.x-t.options.width/2),t.draw()},t.prototype.drawBall=function(){var t=this.ball;this.ballCaptured?this.moveBallToPaddleCenter():(t.moveX(t.x+this.ballXStep),t.moveY(t.y+this.ballYStep)),t.draw()},t.prototype.drawBricks=function(){for(var t,e=this.bricks,o=this.bricksLen,s=!1,n=0;n<o;++n)t=e[n],t.alive()&&(t.draw(),s=!0);s||(this.gameStatus=i.GameStatus.Win)},t.prototype.drawStatus=function(){this.status.draw()},t.prototype.drawGameEnd=function(){var t=this.ctx,e=this.options,o=this.gameStatus===i.GameStatus.Win?"Well Done!":"You Lose";t.fillStyle="white",t.globalAlpha=.7,t.fillRect(0,0,this.width,this.height),t.globalAlpha=1,t.fillStyle=e.status.fill,t.font="30px sans-serif",t.textAlign="center",t.textBaseline="middle",t.fillText(o,Math.round(this.width/2),Math.round(this.height/2))},t.prototype.movePaddle=function(t){var e=this.paddle,o=this.width-e.options.width;t=t<0?0:t>o?o:t,e.x=Math.round(t)},t.prototype.movePaddleByMouse=function(t){this.autoPlay||this.movePaddle(t.clientX-this.canvasRect.left-this.paddle.options.width/2)},t.prototype.movePaddleLeft=function(){this.autoPlay||this.movePaddle(this.paddle.x-this.paddleStep)},t.prototype.movePaddleRight=function(){this.autoPlay||this.movePaddle(this.paddle.x+this.paddleStep)},t.prototype.movePaddleToCenter=function(){this.movePaddle(this.width/2-this.paddle.options.width/2)},t.prototype.captureBall=function(t){if(void 0===t&&(t=!this.ballCaptured),!t&&this.ballCaptured){var e=this.ball;e.moveY(e.y-1)}this.ballCaptured=t},t.prototype.moveBallToPaddleCenter=function(){var t=this.ball,e=this.paddle;t.moveX(e.x+e.options.width/2),t.moveY(e.y-t.options.radius)},t.prototype.destroy=function(){this.parent.removeChild(this.canvas)},t.prototype.processCollision=function(){this.ballCaptured||this.processBorderCollision()||this.processPaddleCollision()||this.processBrickCollision()},t.prototype.processBorderCollision=function(){var t=this.ball,e=t.offset;if(e.left<=0)return l.logger.log("Border left collision"),t.moveX(t.options.radius),this.ballXStep=-this.ballXStep,!0;if(e.right>=this.width)return l.logger.log("Border right collision"),t.moveX(this.width-t.options.radius),this.ballXStep=-this.ballXStep,!0;if(e.top<=0)return l.logger.log("Border top collision"),t.moveY(t.options.radius),this.ballYStep=-this.ballYStep,!0;if(e.bottom>=this.height){l.logger.log("Border bottom collision"),l.logger.log("Lost life");var o=this.status;return o.alive()?this.captureBall(!0):(this.gameStatus=i.GameStatus.Loss,l.logger.log("Game over")),o.decreaseLife(),!0}return!1},t.prototype.processPaddleCollision=function(){var t=this.paddle,e=t.x+t.options.width,o=(t.y,t.options.height,this.ball),i=o.offset,s=i.bottom>=t.y&&i.top<t.y&&(i.left>t.x&&i.left<e||i.right>t.x&&i.right<e);return s&&(l.logger.log("Paddle collision"),o.moveY(t.y-o.options.radius),this.ballYStep=-this.ballYStep),s},t.prototype.processBrickCollision=function(){for(var t,e,o=this.ball,i=o.offset,s=this.bricks,n=this.bricksLen,r=0;r<n;++r)if(e=s[r],t=e.offset,e.alive()){if((i.bottom>=t.top&&i.top<t.top||i.top<=t.bottom&&i.bottom>t.bottom)&&o.x>t.left&&o.x<t.right)return l.logger.log("Brick top/bottom collision"),e.decreaseLife(),this.status.increaseScore(),this.ballYStep=-this.ballYStep,!0;if((i.right>=t.left&&i.left<t.left||i.left<=t.right&&i.right>t.right)&&o.y>t.top&&o.y<t.bottom)return l.logger.log("Brick left/right collision"),e.decreaseLife(),this.status.increaseScore(),this.ballXStep=-this.ballXStep,!0}return!1},t}();e.Playground=h},function(t,e,o){"use strict";function i(t){return t.keyCode||t.which}function s(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];for(var i,n,r,a=0;a<e.length;++a){i=e[a];for(n in i)r=i[n],Array.isArray(r)?t[n]=r.slice():"object"==typeof r?("object"!=typeof t[n]&&(t[n]={}),s(t[n],i[n])):t[n]=r}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.getKeyCode=i,e.merge=s},function(t,e,o){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=o(0),n=function(t){function e(e,o,i,s){var n=t.call(this,e,o,i)||this;return n.options=s,n.moveX(o),n.moveY(i),n}return i(e,t),e.prototype.draw=function(){var t=this.ctx,e=this.options;t.fillStyle=e.fill,t.beginPath(),t.arc(this.x,this.y,e.radius,0,2*Math.PI),t.fill()},e.prototype.moveX=function(t){var e=this.options.radius;this.x=t,this.offset.left=t-e,this.offset.right=t+e},e.prototype.moveY=function(t){var e=this.options.radius;this.y=t,this.offset.top=t-e,this.offset.bottom=t+e},e}(s.Component);e.Ball=n},function(t,e,o){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=o(0),n=function(t){function e(e,o,i,s){var n=t.call(this,e,o,i)||this;n.options=s;var r=n.offset;return r.left=o,r.right=s.width+o,r.top=i,r.bottom=s.height+i,n.life=n.options.fill.length,n}return i(e,t),e.prototype.alive=function(){return this.life>0},e.prototype.decreaseLife=function(){this.life>0&&(this.life-=1)},e.prototype.draw=function(){var t=this.ctx,e=this.options;t.fillStyle=e.fill[this.life-1],t.fillRect(this.x,this.y,e.width,e.height)},e}(s.Component);e.Brick=n},function(t,e,o){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=o(0),n=function(t){function e(e,o,i,s){var n=t.call(this,e,o,i)||this;return n.options=s,n}return i(e,t),e.prototype.draw=function(){var t=this.options,e=this.ctx;e.fillStyle=t.fill,e.fillRect(this.x,this.y,t.width,t.height)},e}(s.Component);e.Paddle=n},function(t,e,o){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var s=o(0),n=function(t){function e(e,o,i,s){var n=t.call(this,e,o,i)||this;return n.options=s,n.reset(),n}return i(e,t),e.prototype.reset=function(){this.score=0,this.life=3},e.prototype.increaseScore=function(){this.score+=10},e.prototype.decreaseLife=function(){this.life-=1},e.prototype.alive=function(){return this.life>1},e.prototype.draw=function(){var t=this.ctx,e=this.options;t.fillStyle=e.fill,t.font=e.font,t.textAlign="left",t.textBaseline="top",t.fillText("Score: "+this.score,30,30),t.textAlign="right",t.textBaseline="left",t.fillText("Life: "+this.life,this.ctx.canvas.width-30,30)},e}(s.Component);e.Status=n},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(2),s=o(1),n=o(3),r=function(){function t(e,o){void 0===o&&(o=document.body),this.parent=o,this.keys={},this.options=n.merge({},t.defaultOptions,e),this.bindMethods(),this.createPlaygroud(),this.newGame()}return t.prototype.bindMethods=function(){this.onNewFrame=this.onNewFrame.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseClick=this.onMouseClick.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this)},t.prototype.createPlaygroud=function(){var t=new i.Playground(this.options,this.parent);this.playground=t,this.canvas=t.canvas},t.prototype.newGame=function(){this.playground.newGame();var t=this.canvas;t.addEventListener("mousemove",this.onMouseMove),t.addEventListener("click",this.onMouseClick),window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp);this.frameId=setInterval(this.onNewFrame,20)},t.prototype.stopGame=function(){var t=this.canvas;t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("click",this.onMouseClick),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp),clearInterval(this.frameId)},t.prototype.onNewFrame=function(){var t=this.playground,e=this.keys;if(t.gameStatus!==s.GameStatus.Play)return void this.stopGame();t.draw(),e[s.Key.Left]&&t.movePaddleLeft(),e[s.Key.Right]&&t.movePaddleRight()},t.prototype.onMouseMove=function(t){this.playground.movePaddleByMouse(t)},t.prototype.onMouseClick=function(t){this.playground.captureBall(!1)},t.prototype.onKeyDown=function(t){var e=n.getKeyCode(t);this.keys[e]=!0,e===s.Key.Space&&this.playground.captureBall()},t.prototype.onKeyUp=function(t){var e=n.getKeyCode(t);this.keys[e]=!1},t.prototype.destroy=function(){this.stopGame(),this.playground.destroy(),this.playground=null,this.options=null,this.parent=null},t}();r.defaultOptions={screen:{width:800,height:600},bg:{fill:"white"},paddle:{width:150,height:30,offsetBottom:30,fill:"deepskyblue"},ball:{radius:10,fill:"deepskyblue"},brick:{width:100,height:25,fill:["#ccebff","deepskyblue"]},status:{fill:"gray",font:"16px sans-serif"},autoPlay:!1},e.Game=r,window.Breakout=r},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.prototype.log=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o]},t}();e.Logger=i,e.logger=new i}]);